<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{layout/gukmin/gukmindefault}">

<!-- <script src="https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ko.YxvJ0QSz5pg.O/m=auth2/rt=j/sv=1/d=1/ed=1/am=AQc/rs=AGLTcCMPJfGBNObzzO4uwlCOq39XAvq1mQ/cb=gapi.loaded_0" async=""></script>
<script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script> -->


<th:block layout:fragment="gukminMainContents">

<script src="/gukmin/js/underscore-min.js"></script>
<script src="/gukmin/include/js/jquery.rateyo.min.js"></script>
<script>
	// 별점 주기
	$(function() {
		$("#rateYo").rateYo({
			rating : 4,
			fullStar : true,
			starWidth : "20px",
			normalFill : "#cccccc",
			ratedFill : "#faa41a"
		});
	});
</script>
<style>
.wrap {
	position: absolute;
	left: 0;
	bottom: 40px;
	width: 288px;
	height: 132px;
	margin-left: -144px;
	text-align: left;
	overflow: hidden;
	font-size: 12px;
	font-family: 'Malgun Gothic', dotum, '돋움', sans-serif;
	line-height: 1.5;
}

.wrap * {
	padding: 0;
	margin: 0;
}

.wrap .info {
	width: 286px;
	height: 120px;
	border-radius: 5px;
	border-bottom: 2px solid #ccc;
	border-right: 1px solid #ccc;
	overflow: hidden;
	background: #fff;
}

.wrap .info:nth-child(1) {
	border: 0;
	box-shadow: 0px 1px 2px #888;
}

.info .title {
	padding: 5px 0 0 10px;
	height: 30px;
	background: #eee;
	border-bottom: 1px solid #ddd;
	font-size: 18px;
	font-weight: bold;
}

.info .close {
	position: absolute;
	top: 10px;
	right: 10px;
	color: #888;
	width: 17px;
	height: 17px;
	background:
		url('http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/overlay_close.png');
}

.info .close:hover {
	cursor: pointer;
}

.info .body {
	position: relative;
	overflow: hidden;
}

.info .desc {
	position: relative;
	margin: 13px 0 0 90px;
	height: 75px;
}

.desc .ellipsis {
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.desc .jibun {
	font-size: 11px;
	color: #888;
	margin-top: -2px;
}

.info .img {
	position: absolute;
	top: 6px;
	left: 5px;
	width: 73px;
	height: 71px;
	border: 1px solid #ddd;
	color: #888;
	overflow: hidden;
}

.info:after {
	content: '';
	position: absolute;
	margin-left: -12px;
	left: 50%;
	bottom: 0;
	width: 22px;
	height: 12px;
	background:
		url('http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')
}

.info .link {
	color: #5085BB;
}
</style>
<style>
/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
#googlemap {
	height: 100%;
}
/* Optional: Makes the sample page fill the window. */
html, body {
	height: 100%;
	margin: 0;
	padding: 0;
}
</style>
<style>
.image-upload>input {
	display: none;
}
</style>
<style>
#sortable {
	list-style-type: none;
	margin: 0;
	padding: 0;
	width: 100%;
}

#sortable li {
	margin: 3px 3px 3px 0;
	padding: 0px;
	float: left;
	width: 48px;
	height: 48px;
	font-size: 1em;
	text-align: left;
}

.input_hidden {
	position: absolute;
	left: -9999px;
}

.selected {
	background-color: #1ABC9C;
}

#sortable label {
	display: inline-block;
	cursor: pointer;
}

#sortable label:hover {
	background-color: #1ABC9C;
}

#sortable label img {
	padding: 3px;
}
</style>

<section>

		<input type="hidden" name="festivalseq" value="1039" id="festivalseq"/>
		<div class="detailDesc">
			<p class="t01">
				부산크리스마스트리문화축제 2019
			</p>
			<p class="t02">
				(사)부산기독교총연합회, 부산크리스마스트리문화축제조직위원회
			</p>
		</div>
		<div class="detailInfo">
			<div class="mainSlideBox">
				<div class="mainSlide">
						<div class="item">
								<img class="vertical" src="https://joyfesta.kr/uploadedfiles/spot/2019/11/6_154143587.JPG" width="780px" height="480px" />
						</div>
				</div>
			</div>
			<div class="detailCont">
				<table>
					<tr class="first">
						<th>행사기간</th>
						<td>2019.11.16 ~ 2020.01.05</td>
					</tr>
					<tr>
						<th>위치</th>
						<td>부산광역시 중구 광복로 58-2</td>
					</tr>
					<tr>
						<th>행사장소</th>
						<td>광복로 메인트리 앞 무대</td>
					</tr>
					<tr>
						<th>연락처</th>
						<td><a href="tel:+82-51-243-3927">+82-51-243-3927</a></td>
					</tr>
					<tr>
						<th>홈페이지</th>
						<td><a href="http://bctf.kr" target="_blank">http://bctf.kr</a></td>
					</tr>
				</table>

				<div class="hostBar mt50">
					
					<div class="hostBar_btn">
						<a href="#" class="btn_storeView">호스트 정보보기</a>
					</div>
				</div>
					
			<div class="ctn_wrong">
				<a href="#" title="1:1문의하기로 이동"> <img
					src="https://joyfesta.kr/include/img/etc/btn_wrong.png" alt="잘못된 정보 제보">
				</a> <span> 이 페이지에 잘못된 정보 또는 새로운 정보가 있나요? <br /> 수정할 내용 또는 사진을
					제보해주세요!
				</span>
			</div>
			<p class="latestDate">
				최근 정보 업데이트
				2019.12.20 21:53
			</p>
			</div>
		</div>

		<div id="detailBox01">
			<ul class="detailTabs">
				<li><a href="javascript:void(0)" class="on"
					data-id="detailBox01">상세정보</a></li>
			</ul>
			<div class="detaillArea">
				<p class="dSubj">기본정보</p>
				<div class="detNormal">
					<table>
						<tr class="first">
							<th>주최</th>
							<td>(사)부산기독교총연합회, 부산크리스마스트리문화축제조직위원회</td>
						</tr>
						<tr>
							<th>주관</th>
							<td>(사)부산기독교총연합회, 부산크리스마스트리문화축제조직위원회, 광복로문화포럼</td>
						</tr>
						<tr>
							<th>기간</th>
							<td>2019.11.16 ~ 2020.01.05</td>
						</tr>
						<tr>
							<th>휴일정보</th>
							<td>기타</td>
						</tr>

					</table>
				</div>
				<p class="dSubj">행사소개</p>
				<div class="detIntroBox">
					<p>아름다운 부산의 겨울이 전하는<br></p><p>열한번 째 트리문화축제!</p><p><br></p><p>가족, 연인, 친구, 이웃에게</p><p>가장 쉽게 사랑을 전하는 방법은 함께하는 것 입니다.</p><p><br></p><p>이 겨울 <b>&lt;부산 크리스마스 트리문화 축제&gt;</b>에서</p><p>아기예수의 탄생을 함께 기뻐하며</p><p>여러분의 사랑을 전해보는 건 어떨까요?</p><p><br></p><p><b>[프로그램]</b></p><p>&nbsp;- 오프닝 게이트</p><p>&nbsp;- 메인트리</p><p>&nbsp;- A구간</p><p>&nbsp;- B구간</p><p>&nbsp;- C구간</p><p>&nbsp;- 포토존</p>
				</div>
				<p class="dSubj">사진/영상</p>
				<div class="detMovieBox">
					<div class="detMovieSlide">					
							<div class="item">							
									<img class="vertical" src="https://joyfesta.kr/uploadedfiles/spot/2019/11/6_154143587.JPG" />					
							</div>
							<div class="item">
									<img
										class="vertical" src="https://joyfesta.kr/uploadedfiles/spot/2019/11/5_154139786.JPG" />		
							</div>
							<div class="item">
									<img
										class="vertical" src="https://joyfesta.kr/uploadedfiles/spot/2019/11/3_154131875.jpg" />
							</div>
							<div class="item">
									<img
										class="vertical" src="https://joyfesta.kr/uploadedfiles/spot/2019/11/2_154128236.jpg" />
							</div>
							<div class="item">
									<img
										class="vertical" src="https://joyfesta.kr/uploadedfiles/spot/2019/11/4_154135756.jpg" />
							</div>
							<div class="item">
									<img
										class="vertical" src="https://joyfesta.kr/uploadedfiles/spot/2019/11/1_154114735.jpg" />
							</div>
					</div>
				</div>
		</div>
	</div>
</section>

<form id="registerform" name="registerform" action="/FestivalDetail.festa" method="post">
	<style>
#sortableedit {
	list-style-type: none;
	margin: 0;
	padding: 0;
	width: 100%;
}

#sortableedit li {
	margin: 3px 3px 3px 0;
	padding: 0px;
	float: left;
	width: 48px;
	height: 48px;
	font-size: 1em;
	text-align: left;
}

#sortableedit label {
	display: inline-block;
	cursor: pointer;
}

#sortableedit label:hover {
	background-color: #1ABC9C;
}

#sortableedit label img {
	padding: 3px;
}
</style>
	<input type="hidden" name="reviewseq" value="" id="reviewseq"/>
	<input type="hidden" name="currentPage" value="" id="currentPage"/>
	<input type="hidden" name="sort" value="" id="sort"/>
	<input type="hidden" name="revieweditimagefilepath" value="" id="revieweditimagefilepath"/>
	<div class="dialog" id="revieweditform"
		style="display: none; z-index: 1000;">
		<div class="popBox_review">
			<div class="popHeader_review">
				<h1>리뷰 수정하기</h1>
				<a href="javascript:void(0)"
					onclick="javascript:$('#revieweditform').hide();"><img
					src="https://joyfesta.kr/include/img/ico/ico_close02.png" /></a>
			</div>
			<div class="popCont_review">
				<div class="snsReviewForm">
					<textarea class="textarea" id="revieweditcontent"></textarea>
					<div class="bottomCont">
						<div class="rateYo_dep">
							<span class="etxt">평점</span>
							<div id="rateYoreviewedit" style="float: left; margin-top: 15px;"></div>
						</div>
						<span class="etxt2" id="revieweditrating"></span>
						<div class="image-upload">
							<label for="reviewimageedit" class="btnFileUpload">사진첨부 </label><input
								name="reviewimage" id="reviewimageedit" type="file" />
						</div>
						<div class="imgBox">
							<ul id="sortableedit">
							</ul>
						</div>
					</div>
				</div>
				<div class="popCont_review_btn">
					<a href="javascript:void(0)" class="btnReviewSave"
						id="revieweditbutton">리뷰수정</a> <a href="javascript:void(0)"
						onclick="javascript:$('#revieweditform').hide();"
						class="btnReviewCancel">취소</a>
				</div>
			</div>
		</div>
	</div>
	<script>
		$('#revieweditbutton')
				.click(
						function() {
							resetCommonDialog();
							indicatorOn();
							$
									.ajax({
										url : 'JSONSpotReviewEdit.festa',
										type : 'POST',
										data : {
											reviewseq : $("#reviewseq").val(),
											rating : $("#rateYoreviewedit")
													.rateYo("rating"),
											content : $('#revieweditcontent')
													.val(),
											imagefilepath : $(
													'#revieweditimagefilepath')
													.val()
										},
										dataType : 'json',
										success : function(data, textStatus,
												jqXHR) {
											indicatorOff();
											if (data.resultcode == 0) {
												$('#revieweditform').hide();
												$('#dialogtitle')
														.append('리뷰수정');
												$('#dialogcontent').append(
														'리뷰수정이 완료되었습니다.');
												$('#commondialog').show();
												$
														.getReviewList(
																1,
																'new',
																3,
																'1039',
																'N');
												$("#sortableedit").empty();
											} else if (data.resultcode == 2) {
												$('#dialogtitle')
														.append('리뷰수정');
												$('#dialogcontent').append(
														data.resultmessage);
												$('#commondialog').show();
											} else {
												$('#dialogtitle')
														.append('리뷰수정');
												$('#dialogcontent').append(
														data.resultmessage);
												$('#commondialog').show();
											}
										},
										error : function(jqXHR, textStatus,
												errorThrown) {
											indicatorOff();
											$('#dialogtitle').append('리뷰수정');
											$('#dialogcontent').append(
													textStatus);
											$('#commondialog').show();
										}
									});
						});

		$(function() {
			$('#sortableedit').sortable({
				update : function(event, ui) {
					var productOrder = $(this).sortable('toArray').toString();
					$('#revieweditimagefilepath').val(productOrder);
				}
			});
			$("#sortableedit").disableSelection();
		});

		var editimageindex = 0;
		$("#reviewimageedit")
				.on(
						'change',
						function() {
							resetCommonDialog();
							indicatorOn();
							if ($('#sortableedit').sortable('toArray').length >= 10) {
								indicatorOff();
								$('#dialogtitle').append('이미지업로드');
								$('#dialogcontent').append(
										'이미지 파일은 최대 10장까지 업로드할 수 있습니다.');
								$('#commondialog').show();
							} else {
								// 업로드
								$
										.ajax({
											url : 'JSONSpotReviewImageUpload.festa',
											type : 'POST',
											data : new FormData($('form')[2]),
											mimeType : 'multipart/form-data',
											dataType : 'json',
											contentType : false,
											cache : false,
											processData : false,
											success : function(data,
													textStatus, jqXHR) {
												if (data.resultcode == 0) {
													indicatorOff();
													$("#sortableedit")
															.append(
																	'<li id="' + data.tempimagepath + '" name="image_' + editimageindex + '">'
																			+ '<img src="' + data.tempimagepath + '" /><a href="javascript:void(0)" onclick="javascript:$.deleteReviewImage(\'image_'
																			+ editimageindex
																			+ '\');" class="del"><img src="/include/img/ico/ico_close01.png" style="vertical-align: top;" /></a></li>');
													editimageindex++;
													$(
															'#revieweditimagefilepath')
															.val(
																	$(
																			'#sortableedit')
																			.sortable(
																					'toArray')
																			.toString());
												} else {
													indicatorOff();
													if (data.resultcode == 1) {
														$('#dialogtitle')
																.append(
																		'이미지업로드');
														$('#dialogcontent')
																.append(
																		'이미지를 첨부해 주세요.');
														$('#commondialog')
																.show();
													} else if (data.resultcode == 2) {
														$('#dialogtitle')
																.append(
																		'이미지업로드');
														$('#dialogcontent')
																.append(
																		'이미지 파일만 첨부 가능합니다.');
														$('#commondialog')
																.show();
													} else if (data.resultcode == 3) {
														$('#dialogtitle')
																.append(
																		'이미지업로드');
														$('#dialogcontent')
																.append(
																		'최대 5MB까지 첨부할 수 있습니다.');
														$('#commondialog')
																.show();
													} else if (data.resultcode == 4) {
														$('#dialogtitle')
																.append(
																		'이미지업로드');
														$('#dialogcontent')
																.append(
																		'리뷰 등록은 로그인 후 이용해 주세요.');
														$('#commondialog')
																.show();
													}
												}
											},
											error : function(jqXHR, textStatus,
													errorThrown) {
												indicatorOff();
												$('#dialogtitle').append(
														'이미지업로드');
												$('#dialogcontent').append(
														textStatus);
												$('#commondialog').show();
											}
										});
							}
						});
	</script>
	<div class="dialog" id="qnaregisterform"
		style="display: none; z-index: 1000;">
		<div class="popBox_qna">
			<div class="popHeader_qna">
				<h1>호스트에게 문의하기</h1>
				<a href="javascript:void(0)"
					onclick="javascript:$('#qnaregisterform').hide();"><img
					src="https://joyfesta.kr/include/img/ico/ico_close02.png" /></a>
			</div>
			<div class="popCont_qna">
				<input type="text" class="inp" id="qnatitle" placeholder="제목" />
				<textarea id="qnacontent" class="textarea"></textarea>
				<input type="text" id="qnaemail"
					value="" class="inp"
					placeholder="이메일주소" />
				<div class="check_line">
					<input type="checkbox" id="qnaemailreply"><label
						for="qnaemailreply">이메일로 답변을 받고 싶어요.</label>
				</div>
				<p class="tx1">
					※ 문의내용 및 답변은 <span>“마이페이지> 나의문의내역”</span> 에서 확인하실 수 있습니다.
				</p>
			</div>
			<div class="btnBox">
				<a href="javascript:void(0)" id="qnaregisterbutton"
					class="btnType01">문의등록</a> <a href="javascript:void(0)"
					onclick="javascript:$('#qnaregisterform').hide();"
					class="btnType02">취소</a>
			</div>
		</div>
	</div>
	<script>
		$('#qnaregisterbutton')
				.click(
						function() {
							resetCommonDialog();
							indicatorOn();
							var qnaemailreply = 'N';
							if ($("input:checkbox[id='qnaemailreply']").is(
									":checked") == true) {
								qnaemailreply = 'Y';
							}
							$
									.ajax({
										url : 'JSONSpotQnaRegister.festa',
										type : 'POST',
										data : {
											spottype : 3,
											spotseq : '1039',
											email : $('#qnaemail').val(),
											title : $('#qnatitle').val(),
											content : $('#qnacontent').val(),
											emailreply : qnaemailreply
										},
										dataType : 'json',
										success : function(data, textStatus,
												jqXHR) {
											indicatorOff();
											if (data.resultcode == 0) {
												$('#qnatitle').val('');
												$('#qnaemail').val('');
												$('#qnacontent').val('');
												$('#qnaemailreply').prop(
														'checked', false);

												$('#qnaregisterform').hide();
												$('#dialogtitle').append(
														'호스트에게 문의하기');
												$('#dialogcontent')
														.append(
																'호스트에게 문의하기 등록이 완료되었습니다.');
												$('#commondialog').show();
												$
														.getSpotQnaList(
																1,
																3,
																'1039',
																'N');
												$("#sortableedit").empty();
											} else if (data.resultcode == 2) {
												$('#dialogtitle').append(
														'호스트에게 문의하기');
												$('#dialogcontent').append(
														data.resultmessage);
												$('#commondialog').show();
											} else {
												$('#dialogtitle').append(
														'호스트에게 문의하기');
												$('#dialogcontent').append(
														data.resultmessage);
												$('#commondialog').show();
											}
										},
										error : function(jqXHR, textStatus,
												errorThrown) {
											indicatorOff();
											$('#dialogtitle').append(
													'호스트에게 문의하기');
											$('#dialogcontent').append(
													textStatus);
											$('#commondialog').show();
										}
									});
						});
	</script>
</form>




<div class="dialog" id="imagelist" style="display: none; z-index: 1000;">
	<div class="popBox_imgView">
		<div class="popHeader">
			<h1>이미지 상세보기</h1>
			<a href="javascript:void(0)" onclick="javascript:closeImageView();"><img
				src="https://joyfesta.kr/include/img/ico/ico_close02.png" /></a>
		</div>
		<div class="popCont">
			<div class="imgSlideBox01">
				<div class="slideRela">
					
						<div class="item" onclick="javascript:closeImageView();">
							
							
								<a href="javascript:void(0)"><img
									class=""
									src="https://joyfesta.kr/uploadedfiles/spot/2019/11/6_154143587.JPG" /></a>
							
						</div>
					
						<div class="item" onclick="javascript:closeImageView();">
							
							
								<a href="javascript:void(0)"><img
									class=""
									src="https://joyfesta.kr/uploadedfiles/spot/2019/11/5_154139786.JPG" /></a>
							
						</div>
					
						<div class="item" onclick="javascript:closeImageView();">
							
							
								<a href="javascript:void(0)"><img
									class=""
									src="https://joyfesta.kr/uploadedfiles/spot/2019/11/3_154131875.jpg" /></a>
							
						</div>
					
						<div class="item" onclick="javascript:closeImageView();">
							
							
								<a href="javascript:void(0)"><img
									class=""
									src="https://joyfesta.kr/uploadedfiles/spot/2019/11/2_154128236.jpg" /></a>
							
						</div>
					
						<div class="item" onclick="javascript:closeImageView();">
							
							
								<a href="javascript:void(0)"><img
									class=""
									src="https://joyfesta.kr/uploadedfiles/spot/2019/11/4_154135756.jpg" /></a>
							
						</div>
					
						<div class="item" onclick="javascript:closeImageView();">
							
							
								<a href="javascript:void(0)"><img
									class=""
									src="https://joyfesta.kr/uploadedfiles/spot/2019/11/1_154114735.jpg" /></a>
							
						</div>
					
				</div>
				<a href="javascript:void(0)" class="imgLeft"><img
					src="https://joyfesta.kr/include/img/ico/ico_left02.png" /></a> <a
					href="javascript:void(0)" class="imgRight"><img
					src="https://joyfesta.kr/include/img/ico/ico_right02.png" /></a>
				<div class="pages">
					1/<span>6</span>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	function closeImageView() {
		$('#imagelist').hide();
		if ($("#videotag").get(0) != null) {
			$("#videotag").get(0).pause();
		}
		if (document.getElementById('videoframe') != null) {
			var iframe = document.getElementById('videoframe');
			var iframeSrc = iframe.src;
			iframe.src = iframeSrc;
		}
	}

	function checkImage(obj) {
		if (obj.height > obj.width) {
			$(obj).addClass("vertical");
		} else {
			$(obj).removeClass("vertical");
		}
	  }

	function imageDialog(index) {
		$('#imagelist').show();
		$('.imgSlideBox01 .slideRela').slick('setPosition');
		$('.imgSlideBox01 .slideRela').slick('slickGoTo', index);
	}

	$(function(){
        $(".imgSlideBox01 .slideRela").slick({
            slidesToShow: 1,
            dots: false,
			adaptiveHeight: true
        });
        $('body').on('afterChange', '.imgSlideBox01 .slideRela', function(slick, slide){
            var num = $(this).slick('slickCurrentSlide')+1;
            $(".imgSlideBox01 .pages").text(num +"/"+slide.slideCount);
        });
        $("body").on("click",".imgLeft",function(e){
            $('.imgSlideBox01 .slideRela').slick("slickPrev");
        });
        $("body").on("click",".imgRight",function(e){
            $('.imgSlideBox01 .slideRela').slick("slickNext");
        });
	});
</script>

<script>
	$(document).ready(
			function() {
				$.getReviewList(1, 'new', 3,
						'1039',
						'N');
				$.getSpotBlogList(1,
						'부산크리스마스트리문화축제 2019');
				$.getSpotNewsList(1,
						'부산크리스마스트리문화축제 2019');
				$.getSpotQnaList(1, 3, '1039',
						'N');
				$.spotViewHistory(3, '1039');
			});

	
</script>
</th:block>

<!-- <iframe id="ssIFrame_google" sandbox="allow-scripts allow-same-origin" aria-hidden="true" frame-border="0" src="https://accounts.google.com/o/oauth2/iframe#origin=https%3A%2F%2Fjoyfesta.kr&amp;rpcToken=586279957.8021383" style="position: absolute; width: 1px; height: 1px; left: -9999px; top: -9999px; right: -9999px; bottom: -9999px; display: none;"></iframe> -->
<!-- <!-- <html><head><title></title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0"><script src="https://ssl.gstatic.com/accounts/o/3722190871-idpiframe.js" nonce=""></script></head><body><script type="text/javascript" nonce="">lso.startIdpIFrame();</script></body></html> -->


</html>
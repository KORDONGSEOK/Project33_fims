<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{layout/admin/memberdefault}">

<th:block layout:fragment="adminMainContents">

<div id="content" class="row">
                <div class="col-xs-12">
                    <div class="page-header js-affix">
    <h3>회원 리스트</h3>
    <input type="submit" value="!회원 등록" class="btn btn-red-line" id="btnJoin"/>
</div>

<form id="frmSearchBase" method="get" class="content-form js-search-form js-form-enter-submit">
    <input type="hidden" name="sort" value=""/>
    <input type="hidden" name="searchFl" value="y"/>
    <input type="hidden" name="pageNum" value="10"/>
    <div class="table-title gd-help-manual">
       # 회원 검색
    </div>
    <div class="search-detail-box form-inline">
    <input type="hidden" name="detailSearch" value=""/>
    <table class="table table-cols">
        <colgroup>
            <col class="width-md">
            <col class="width-3xl">
            <col class="width-md">
            <col class="width-3xl">
        </colgroup>
        <tbody>
                    <tr>
                <th>상점</th>
                <td colspan="3">
                    <label class="radio-inline">
                        <input type="radio" name="mallSno"
                               value="" checked="checked"/>
                        전체
                    </label>
                                            <label class="radio-inline">
                            <input type="radio" name="mallSno"
                                   value="1" />
                            <span class="flag flag-16 flag-kr"></span>기준몰                        </label>
                                            <label class="radio-inline">
                            <input type="radio" name="mallSno"
                                   value="2" />
                            <span class="flag flag-16 flag-us"></span>영문몰                        </label>
                                            <label class="radio-inline">
                            <input type="radio" name="mallSno"
                                   value="3" />
                            <span class="flag flag-16 flag-cn"></span>중문몰                        </label>
                                            <label class="radio-inline">
                            <input type="radio" name="mallSno"
                                   value="4" />
                            <span class="flag flag-16 flag-jp"></span>일문몰                        </label>
                                    </td>
            </tr>
                <tr>
            <th>검색어</th>
            <td colspan="3">
                <select class=" form-control" id="key" name="key" ><option value="memId"  >아이디</option><option value="memNm"  >이름</option><option value="nickNm"  >닉네임</option><option value="email"  >이메일</option><option value="cellPhone"  >휴대폰번호</option><option value="phone"  >전화번호</option><option value="__disable5"  disabled>==========</option><option value="company"  >회사명</option><option value="busiNo"  >사업자등록번호</option><option value="ceo"  >대표자명</option><option value="__disable8"  disabled>==========</option><option value="recommId"  >추천인아이디</option><option value="fax"  >팩스번호</option></select>                <input type="text" name="keyword" value=""
                       class="form-control"/>
            </td>
        </tr>
        <tr>
            <th>회원등급</th>
            <td>
                <select class="form-control " id="groupSno" name="groupSno" ><option value="">등급</option><option value="1"  >일반회원</option><option value="2"  >우수회원</option></select>            </td>
            <th>회원구분</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="memberFl"
                           value="" checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="memberFl"
                           value="personal" />
                    개인회원
                </label>
                <label class="radio-inline">
                    <input type="radio" name="memberFl"
                           value="business" />
                    사업자회원
                </label>
            </td>
        </tr>
        <tr>
            <th>가입승인</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="appFl"
                           value="" checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="appFl"
                           value="y" />
                    승인
                </label>
                <label class="radio-inline">
                    <input type="radio" name="appFl"
                           value="n" />
                    미승인
                </label>
            </td>
            <th>회원가입일</th>
            <td>
                <div class="input-group js-datepicker">
                    <input type="text" class="form-control" placeholder="" name="entryDt[]"
                           value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
                ~
                <div class="input-group js-datepicker">
                    <input type="text" class="form-control" placeholder="" name="entryDt[]"
                           value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
            </td>
        </tr>
        </tbody>
        <tbody class="js-search-detail">
        <tr>
            <th>방문횟수</th>
            <td>
                <input type="text" class="form-control" name="loginCnt[]" size="7"
                       value=""/>
                회 ~
                <input type="text" class="form-control" name="loginCnt[]" size="7"
                       value=""/>
                회
            </td>
            <th>최종로그인일</th>
            <td>
                <div class="input-group js-datepicker">
                    <input type="text" class="form-control" placeholder="" name="lastLoginDt[]"
                           value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
                ~
                <div class="input-group js-datepicker">
                    <input type="text" class="form-control" placeholder="" name="lastLoginDt[]"
                           value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
            </td>
        </tr>
        <tr>
            <th>마일리지</th>
            <td>
                <input type="text" class="form-control js-number" name="mileage[]" size="7"
                       value=""/>
                원 ~
                <input type="text" class="form-control js-number" name="mileage[]" size="7"
                       value=""/>
                원
            </td>
            <th>예치금</th>
            <td>
                <input type="text" class="form-control js-number" name="deposit[]" size="7"
                       value=""/>
                원 ~
                <input type="text" class="form-control js-number" name="deposit[]" size="7"
                       value=""/>
                원
            </td>
        </tr>
        <tr>
            <th>상품주문건수</th>
            <td>
                <input type="text" class="form-control js-number" name="saleCnt[]" size="7"
                       value=""/>
                건 ~
                <input type="text" class="form-control js-number" name="saleCnt[]" size="7"
                       value=""/>
                건
            </td>
            <th>주문금액</th>
            <td>
                <input type="text" class="form-control js-number" name="saleAmt[]" size="7"
                       value=""/>
                원 ~
                <input type="text" class="form-control js-number" name="saleAmt[]" size="7"
                       value=""/>
                원
            </td>
        </tr>
        <tr>
            <th>SMS수신동의</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="smsFl"
                           value="" checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="smsFl"
                           value="y" />
                    수신
                </label>
                <label class="radio-inline">
                    <input type="radio" name="smsFl"
                           value="n" />
                    수신거부
                </label>
            </td>
            <th>메일수신동의</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="maillingFl"
                           value="" checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="maillingFl"
                           value="y" />
                    수신
                </label>
                <label class="radio-inline">
                    <input type="radio" name="maillingFl"
                           value="n" />
                    수신거부
                </label>
            </td>
        </tr>
        <tr>
            <th>가입경로</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="entryPath"
                           value="" checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="entryPath"
                           value="pc" />
                    PC
                </label>
                <label class="radio-inline">
                    <input type="radio" name="entryPath"
                           value="mobile" />
                    모바일
                </label>
            </td>
            <th>장기 미로그인</th>
            <td>
                <input type="text" class="form-control js-number" name="novisit" size="7"
                       value=""/>
                일 이상 로그인하지 않은 회원
            </td>
        </tr>
        <tr>
            <th>성별</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="sexFl"
                           value="" checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="sexFl"
                           value="m" />
                    남자
                </label>
                <label class="radio-inline">
                    <input type="radio" name="sexFl"
                           value="w" />
                    여자
                </label>
            </td>
            <th>생일</th>
            <td>
                <div class="input-group">
                    <label>
                        <input type="checkbox" id="birthCheckFl" name="birthFl" value="">
                        특정일 검색
                    </label>
                </div>
                <select class="form-control " id="calendarFl" name="calendarFl" ><option value="">전체</option><option value="s"  >양력</option><option value="l"  >음력</option></select>                <div class="input-group js-datepicker-month">
                    <input type="text" id="birthDt1" class="form-control js-number" placeholder="" name="birthDt[]" value="" maxlength="10"/>
                </div>
                <div class="input-group js-datepicker firstdate">
                    <input type="hidden" id="yBirthDt1" class="form-control" placeholder="" value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
                <div class="input-group seconddate"> ~ </div>
                <div class="input-group js-datepicker-month seconddate">
                    <input type="text" id="birthDt2" class="form-control js-number seconddate" placeholder="" name="birthDt[]" value="" maxlength="10"/>
                </div>
                <div class="input-group js-datepicker seconddate">
                    <input type="hidden" id="yBirthDt2" class="form-control seconddate" placeholder="" value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
            </td>
        </tr>
        <tr>
            <th>결혼여부</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="marriFl"
                           value="" checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="marriFl"
                           value="n" />
                    미혼
                </label>
                <label class="radio-inline">
                    <input type="radio" name="marriFl"
                           value="y" />
                    기혼
                </label>
            </td>
            <th>결혼기념일</th>
            <td>
                <div class="input-group js-datepicker">
                    <input type="text" class="form-control" placeholder="" name="marriDate[]"
                           value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
                ~
                <div class="input-group js-datepicker">
                    <input type="text" class="form-control" placeholder="" name="marriDate[]"
                           value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
            </td>
        </tr>
        <tr>
            <th>개인정보유효기간</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="expirationFl"
                           value=""checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="expirationFl"
                           value="1" />
                    1년
                </label>
                <label class="radio-inline">
                    <input type="radio" name="expirationFl"
                           value="3" />
                    3년
                </label>
                <label class="radio-inline">
                    <input type="radio" name="expirationFl"
                           value="5" />
                    5년
                </label>
                <label class="radio-inline">
                    <input type="radio" name="expirationFl"  id="expirationNone"
                           value="999" />
                    탈퇴 시
                </label>
            </td>
            <th>휴면 전환 예정 회원</th>
            <td>
                <label class="checkbox-inline mgl10">
                    <input type="checkbox" id="dormantMemberExpected" name="dormantMemberExpected" value="">
                    휴면 전환
                    <select class="form-control " id="expirationDay" name="expirationDay" disabled="true"><option value="7"  >7</option><option value="30"  >30</option><option value="60"  >60</option></select>일 전 회원
                </label>
            </td>
        </tr>
        <tr>
            <th>연결계정</th>
            <td>
                <label class="radio-inline">
                    <input type="radio" name="connectSns"
                           value="" checked="checked"/>
                    전체
                </label>
                <label class="radio-inline">
                    <input type="radio" name="connectSns"
                           value="payco" />
                    페이코
                </label>
                <label class="radio-inline">
                    <input type="radio" name="connectSns"
                           value="facebook" />
                    페이스북
                </label>
                <label class="radio-inline">
                    <input type="radio" name="connectSns"
                           value="naver" />
                    네이버
                </label>
                <label class="radio-inline">
                    <input type="radio" name="connectSns"
                           value="kakao" />
                    카카오
                </label>
                <label class="radio-inline">
                    <input type="radio" name="connectSns"
                           value="wonder" />
                    위메프
                </label>
            </td>
            <th>휴면해제일</th>
            <td>
                <div class="input-group js-datepicker">
                    <input type="text" class="form-control" placeholder="" name="sleepWakeDt[]"
                           value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
                ~
                <div class="input-group js-datepicker">
                    <input type="text" class="form-control" placeholder="" name="sleepWakeDt[]"
                           value=""/>
                    <span class="input-group-addon">
                        <span class="btn-icon-calendar">
                        </span>
                    </span>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
    <button type="button" class="btn btn-sm btn-link js-search-toggle bold">상세검색
        <span>펼침</span>
    </button>
</div>
<div class="table-btn">
    <input type="submit" value="검색" class="btn btn-lg btn-black js-search-button"/>
</div>

<script type="text/javascript">
    var detailSearch = {
        $age: $('#age', '.search-detail-box'),
        $under14: $(':checkbox[name=under14]', '.search-detail-box')
    };
    detailSearch.$under14.click(function () {
        detailSearch.$age.val('');
    });
    detailSearch.$age.change(function () {
        if (detailSearch.$age.val() > 0) {
            detailSearch.$under14.prop('checked', false);
        }
    });
    function checkDormant() {
        if($('input:checkbox[name="dormantMemberExpected"]').val() == 'y') {
            $('#dormantMemberExpected').prop('checked', true);
            $('input[name="novisit"]').attr('disabled', true);
            $("#expirationDay").attr('disabled', false);
        }
    }
    $(document).on('click', 'input[name=dormantMemberExpected]', function(e){
        if($(this).prop("checked")) {
            $(this).val('y');
            $('input[name="novisit"]').attr('disabled',true);
            if($('input[name="novisit"]').val() != '') { //장기 미로그인 값이 존재하면 drop
                $('input[name="novisit"]').val('');
            }
            $("#expirationDay").attr('disabled', false);
            $('input[id="expirationNone"]').attr('disabled',true);
        } else {
            $(this).val('n');
            $('input[name="novisit"]').attr('disabled',false);
            $("#expirationDay").attr('disabled', true);
            $('input[id="expirationNone"]').attr('disabled',false);
        }
    });
    function getMonthFormatDate(date) {
        var today = new Date();
        var month = date.substring(0, 2);
        var day = date.substring(month.length, date.length);
        var maxDate = 31;

        if(month.length == 1) month = '0' + month;
        if(day.length == 1) day = '0' + day;
        if(date.length <= 2) day = '01';

        if(month == 4 || month == 6 || month == 9 || month == 11) {
            maxDate = 30;
        } else if(month == 2) {
            maxDate = 29;
        }

        if(month > 12) {
            today.getMonth() >= 9 ? (month = today.getMonth() + 1) : (month = '0' + (today.getMonth() + 1))
            today.getDate() >= 10 ? day = today.getDate() : day = '0' + today.getDate()
        } else if(day > maxDate) {
            day = maxDate;
        }

        if (month == '00')  month = '01';
        if (day == '00')    day = '01';

        return month + '-' + day;
    }

    function getYearFormatDate(date) {
        var today = new Date();
        var year = date.substring(0, 4);
        var month = date.substr(year.length, 2);
        var day = date.substring((year.length + month.length), date.length);
        var maxDate = 31;

        if(month.length == 1) month = '0' + month;
        if(day.length == 1) day = '0' + day;
        if(date.length <= 6) day = '01';

        if(month == 4 || month == 6 || month == 9 || month == 11) {
            maxDate = 30;
        } else if(month == 2) {
            ((year%4 == 0 && year%100 != 0) || year%400 == 0) ? maxDate = 29 : maxDate = 28
        }

        if(month > 12) {
            year = today.getFullYear();
            today.getMonth() >= 9 ? (month = today.getMonth() + 1) : (month = '0' + (today.getMonth() + 1))
            today.getDate() >= 10 ? day = today.getDate() : day = '0' + today.getDate()
        } else if(day > maxDate) {
            day = maxDate;
        }

        if (year == '0000') year = '0001';
        if (month == '00')  month = '01';
        if (day == '00')    day = '01';

        return year + '-' + month + '-' + day;
    }

    function checkBirthFl() {
        if($('input:checkbox[name="birthFl"]').val() == 'y') {
            $('#birthCheckFl').prop('checked', true);
            $('.seconddate').hide();
            $('.seconddate').val('');
        }
    }

    $(document).ready(function () {

       $('.js-datepicker').datetimepicker().on('dp.change', function(){
           if($(this).prop('class') == 'input-group js-datepicker firstdate') {
               $('#birthDt1').val($('#yBirthDt1').val());
           } else if($(this).prop('class') == 'input-group js-datepicker seconddate') {
               $('#birthDt2').val($('#yBirthDt2').val());
           }
       })

       $('#birthCheckFl').on('click', function(){
            if($(this).is(":checked")) {
                $(this).val('y');
                $('.seconddate').hide();
                $('.seconddate').val('');
            } else {
                $(this).val('n');
                $('.seconddate').show();
            }
        })

       $('input[name=\'birthDt[]\']').on('change', function(){
           if($(this).val().substr(0, 1) == '-') {
               var today = new Date();
               var month = today.getMonth() + 1;
               var day = today.getDate();

               if (month < 10)  month = '0' + month;
               if (day < 10)    day = '0' + day;

               $(this).val(today.getFullYear() + '-' + month + '-' + day);
           } else {
               var date = $(this).val().replace(/-/g, '');
               if(date.length > 0) {
                   date.length <= 4 ? $(this).val(getMonthFormatDate(date)) : $(this).val(getYearFormatDate(date))
               }
           }
       })

       $('input[type=submit]').on('click', function(){
           if(($('#birthDt1').val().length == 5 && $('#birthDt2').val().length == 10)
               || ($('#birthDt1').val().length == 10 && $('#birthDt2').val().length == 5)){
               dialog_alert('생일 검색 기간을 다시 확인해주세요.', '정보');
               return false;
           }
       })

        checkBirthFl();
        checkDormant();
    })
</script>
</form>
<form id="frmList" action="/adminview/member/memberListpage" method="get" target="ifrmProcess">
    <div class="table-header form-inline">
        <div class="pull-left">
            검색
            <strong>2</strong>
            명 / 전체
            <strong>2</strong>
            명
        </div>
        <div class="pull-right">
            <div>
                <select name="sort" class="form-control">
                    <option value="entryDt desc" selected="selected">회원가입일&darr;</option>
                    <option value="entryDt asc" >회원가입일&uarr;</option>
                    <option value="lastLoginDt desc" >
                        최종로그인&darr;
                    </option>
                    <option value="lastLoginDt asc" >
                        최종로그인&uarr;
                    </option>
                    <option value="sleepWakeDt desc" >
                        휴면해제일&darr;
                    </option>
                    <option value="sleepWakeDt asc" >
                        휴면해제일&uarr;
                    </option>
                    <option value="loginCnt desc" >
                        방문횟수&darr;
                    </option>
                    <option value="loginCnt asc" >방문횟수&uarr;</option>
                    <option value="memNm desc" >이름&darr;</option>
                    <option value="memNm asc" >이름&uarr;</option>
                    <option value="memId desc" >아이디&darr;</option>
                    <option value="memId asc" >아이디&uarr;</option>
                    <option value="mileage desc" >마일리지&darr;</option>
                    <option value="mileage asc" >마일리지&uarr;</option>
                    <option value="deposit desc" >예치금&darr;</option>
                    <option value="deposit asc" >예치금&uarr;</option>
                    <option value="saleAmt desc" >주문금액&darr;</option>
                    <option value="saleAmt asc" >주문금액&uarr;</option>
                </select>&nbsp;
                <select class=" js-page-number form-control" id="pageNum" name="pageNum" ><option value="10" selected="selected" >10개 보기</option><option value="20"  >20개 보기</option><option value="30"  >30개 보기</option><option value="40"  >40개 보기</option><option value="50"  >50개 보기</option><option value="60"  >60개 보기</option><option value="70"  >70개 보기</option><option value="80"  >80개 보기</option><option value="90"  >90개 보기</option><option value="100"  >100개 보기</option><option value="200"  >200개 보기</option><option value="300"  >300개 보기</option><option value="500"  >500개 보기</option></select>                <!--<button type="button" class="btn btn-sm btn-default" id="btnGrid">GRID</button>-->
            </div>
        </div>
    </div>

    <table class="table table-rows" id="myTable">
        <colgroup>
            <col class="width-xs"/>
                            <col/>
                        <col class="width-xs"/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
            <col/>
        </colgroup>
        <thead>
        <tr>
            <th>
                <input type="checkbox" id="chk_all" class="js-checkall" data-target-name="chk"/>
            </th>
            <th>번호</th>
            <th>아이디</th>
            <th>이름</th>
            <th>권한</th>
            <th>주소</th>
            <th>연락처</th>
            <th>이메일</th>
            <th>생년월일</th>
            <th>가입일자</th>
            <th>수정</th>
            <th>삭제</th>
        </tr>
        </thead>
        <tbody>
 	       <th:block th:if="${#lists.size(memberListpageing)} > 0">
           <tr class="center" data-member-no="2" th:each="memberListpageing, l : ${memberListpageing}">
           <td>
           <input type="checkbox" name="chk[]" value="2"
                  data-memid="test_id_2"
                  data-memnm="이회원"
                  data-deposit="2000.00"
                  data-mileage="2150.00"
                  data-couponcount="0"
                  data-appfl="y"
                  data-maillingfl="y"
                  data-smsfl="y"
                  data-cellphone="010-1234-1234"
                  data-email="test02@godo.co.kr"/>
           </td>
           <td class="font-num" th:text="${l.count}"></td>
           <td>
               <span class="js-layer-crm hand" th:text="${memberListpageing.LoginCd}"></span>
           </td>
           <td>
               <span class="js-layer-crm hand" th:text="${memberListpageing.MemNm}"></span>
           </td>
           <td>
               <span class="font-num js-layer-crm hand" th:text="${memberListpageing.MemLevNm}"></span>
           </td>
           <td>
               <span class="font-num js-layer-crm hand" th:text="${memberListpageing.MemAddr}"></span>
           </td>
           <td>
               <span class="font-num js-layer-crm hand" th:text="${memberListpageingMemPhone}"></span>
           </td>
           <td>
               <span class="font-num js-layer-crm hand" th:text="${memberListpageing.MemEmail}"></span>
           </td>
           <td>
               <span class="font-date js-layer-crm hand" th:text="${memberListpageing.MemBirth}"></span>
           </td>
           <td>
               <span class="font-date js-layer-crm hand" th:text="${memberListpageing.MemJoinDt}"></span>
           </td>
           <td>
          	 <button type="button" class="btn btn-white btn-sm btnModify">수정</button>
           </td>
           <td>
          	 <button type="button" class="btn btn-white btn-sm btnModify">삭제</button>
           </td>
       </tr>
       </th:block>
    </table>

    <div class="table-action clearfix">
        <div class="pull-left">
            <button type="button" class="btn btn-white" id="btnApply">선택 가입승인</button>
            <button type="button" class="btn btn-white" id="btnDelete">선택 탈퇴처리</button>
        </div>
        <div class="pull-right">
                        <button type="button" class="btn btn-white btn-icon-excel js-excel-download" data-target-form="frmSearchBase" data-search-count="2" data-total-count="2"
                    data-target-list-form="frmList" data-target-list-sno="chk">엑셀다운로드
            </button>
        </div>

    </div>
    <div class="center">
    	<nav>
    		<ul class="pagination pagination-sm">
    			<li>
    				<a th:href="@{/adminview/member/memberList}">맨처음</a>
    			</li>
    			<li>
    				<a  class="prev" th:if="${currentPage > 1}" 
					th:href="@{//adminview/member/memberList(currentPage=${currentPage - 1})}">이전</a>
    			</li>
    			<th:block th:each="num:${#numbers.sequence(startPageNum,lastPageNum)}">
    			<li>
    				<span  th:if="${currentPage == num}" 
					th:text="${num}"></span>
					<a  th:unless="${currentPage == num}" 
					th:text="${num}" 
					th:href="@{/adminview/member/memberList(currentPage=${num})}"></a>
    			</li>
    			</th:block>
    			<li>
    				<a th:if="${currentPage < lastPage}" 
					th:href="@{/adminview/member/memberList(currentPage=${currentPage + 1})}">다음</a>
    			</li>
    			<li>
    				<a th:href="@{/adminview/member/memberList(currentPage=${lastPage})}">마지막</a>
    			</li>
    		</ul>
    	</nav>
    </div>
</form>


<script type="text/javascript">
    var $formList = $('#frmList');
    var msg = {
        DENY_MAIL: "수신거부한 회원 입니다. 메일 발송을 하시려면 확인을 눌러주세요.",
        DENY_SMS: "수신거부한 회원 입니다. SMS 발송을 하시려면 확인을 눌러주세요.",
        CHECK: "회원을 선택해 주세요.",
        APPLY: "명의 회원이 가입 승인처리되었습니다",
        APPLY_MISS: "가입을 승인할 회원이 없습니다.",
        DELETE: "회원정보 삭제가 완료되었습니다."
    };

    $(document).ready(function () {
        $('.btnModify', $formList).on('click', function (e) {
            location.href = './member_modify.php?memNo=' + member.get_member_attribute(e)
        });

        $('#btnApply', $formList).on('click', apply_member);

        $('#btnDelete', $formList).on('click', check_delete);

        $('.btnSendMail', $formList).on('click', function (e) {
            if (member.get_member_attribute(e, 'data-email').length < 1) {
                alert('이메일 정보가 없는 회원입니다.');
                return;
            }
            if (member.get_member_attribute(e, 'data-maillingFl') === 'y') {
                member_mail(member.get_member_attribute(e));
            } else {
                dialog_confirm(msg.DENY_MAIL, function (result) {
                    if (result) {
                        member_mail(member.get_member_attribute(e));
                    } else {
                        layer_close();
                    }
                });
            }
        });

        $('#btnJoin').on('click', function (e) {
            location.href = '/adminview/member/memberRegister';
        });

        // 정렬&출력수
        $('select[name=\'sort\']').change({targetForm: '#frmSearchBase'}, member.page_sort);
    });

    function check_delete() {
        var isValid = false;
        var hasDeposit = false; // 예치금 보유 여부
        var hasMileage = false; // 마일리지, 쿠폰 보유 여부
        var $checkList = $formList.find(':checkbox[name="chk[]"]:checked');
        var length = $checkList.length;
        var lastIdx = length - 1;

        if (length == 0) {
            alert("회원을 선택해 주세요.");
            return false;
        }
        $checkList.each(function (idx, item) {
            var $item = $(item);
            if ($item.data('deposit') > 0) {
                hasDeposit = true;
                return false;
            }
            if (hasMileage === false && ($item.data('mileage') > 0 || $item.data('couponcount') > 0)) {
                hasMileage = true;
            }
        });

        if (hasDeposit == true) {
            alert('예치금을 보유중인 회원이 포함되어있습니다. 예치금을 보유중인 회원은 탈퇴처리할 수 없습니다.');
            isValid = false;
            return false;
        }
        if (hasMileage == true) {
            dialog_confirm('사용가능한 쿠폰/마일리지를 보유중인 회원이 포함되어있습니다. 탈퇴처리 시 보유중인 회원혜택은 모두 삭제되고 즉시 탈퇴처리되며, 탈퇴완료 시 취소하실 수 없습니다.\n선택한 회원을 탈퇴처리하시겠습니까?', function (result) {
                if (result) {
                    delete_member();
                }
            });
            return false;
        }
        delete_member();
    }

    function delete_member() {
        if (!member.alert_check($formList, "회원을 선택해 주세요.")) {
            return false;
        }
        dialog_confirm('선택한 회원을 탈퇴처리하시겠습니까? 해당 회원은 즉시 탈퇴처리되며, 탈퇴완료 시 취소할 수 없습니다.', function (result) {
            if (result) {
                var data = $formList.serializeArray();
                data.push({name: "mode", value: "delete"});
                post_with_reload('../member/member_ps.php', data);
            } else {
                layer_close();
            }
        });
    }

    function apply_member(e) {
        e.preventDefault();

        if (member.alert_check($formList, "회원을 선택해 주세요.")) {
            dialog_confirm('선택한' + $(':checkbox:checked', $formList).not('.js-checkall').length + '명의 가입을 승인하시겠습니까?<br/>(자동발송 설정에 따라 회원에게 SMS/메일이 발송됩니다.)', function (result) {
                if (result) {
                    var data = $formList.serializeArray();
                    data.push({name: "mode", value: "approval_join"});
                    post_with_reload('../member/member_batch_ps.php', data);
                }
            });

        }
    }

    </script>

                    <div class="information ">
    <h4>안내</h4>
    <div class="content">
        <p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); text-transform: none; text-indent: 0px; letter-spacing: normal; font-family: 돋움, Dotum, Helvetica, sans-serif; font-size: 12px; font-style: normal; font-weight: 400; word-spacing: 0px; white-space: normal; orphans: 2; widows: 2; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><b><span style="font-family: 나눔고딕, NanumGothic; font-size: 10pt;">회원의 주문금액은 어떤 기준으로 집계되나요?</span></b>&nbsp;</p><p style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); text-transform: none; text-indent: 0px; letter-spacing: normal; font-family: 돋움, Dotum, Helvetica, sans-serif; font-size: 12px; font-style: normal; font-weight: 400; word-spacing: 0px; white-space: normal; orphans: 2; widows: 2; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><span style="font-family: 나눔고딕, NanumGothic; font-size: 8pt;">ㆍ회원의 주문금액은 구매확정된 주문에 대해서만 집계합니다.&nbsp;&nbsp;</span></p>    </div>
</div>
                </div>
            </div>


</th:block>

</html>

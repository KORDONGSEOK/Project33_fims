<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{layout/admin/memberdefault}">

<th:block layout:fragment="adminMainContents">

<div id="content" class="row">
                <div class="col-xs-12">
                    <form id="frmSetup" action="./member_ps.php" method="post">
    <div class="page-header js-affix">
        <h3>회원 가입 정책 관리            <small></small>
        </h3>
        <input type="submit" value="저장" class="btn btn-red"/>
    </div>
    <div class="table-title gd-help-manual">
        가입 설정
    </div>
    <table class="table table-cols mgb15">
        <colgroup>
            <col class="width-lg"/>
            <col/>
        </colgroup>
        <tr>
            <th>가입승인 사용설정</th>
            <td>
                <div class="radio mgt0">
                    <label>
                        <input type="radio" name="appUseFl" value="n" checked="checked">
                        승인 절차 없이 가입
                    </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="appUseFl" value="y" >
                        승인 후 가입
                    </label>
                </div>
                <div class="radio mgb0">
                    <label>
                        <input type="radio" name="appUseFl" value="company" >
                        사업자회원만 승인 후 가입
                    </label>
                </div>
            </td>
        </tr>
        <tr>
            <th>가입연령제한 설정</th>
            <td>
                <div class="radio">
                    <label>
                        <input type="radio" name="under14Fl" value="n" checked="checked">
                        제한 안함
                    </label>
                </div>
                <dl class="dl-horizontal">
                    <dt class="form-inline" style="width: 220px;">
                        만 <select name="limitAge" class="form-control" style="width:120px">
                            <option value="14" selected>14</option>
                            <option value="19" >19</option>
                        </select> 미만인 경우
                    </dt>
                    <dd style="margin-left: 230px;">
                        <div class="radio mgt0">
                            <label>
                                <input type="radio" name="under14Fl" value="y" >
                                운영자 승인 후 가입&nbsp;
                                <button type="button" class="btn btn-gray btn-sm" id="btnUnder14Download">법정대리인 동의서 샘플 다운로드</button>
                            </label>
                        </div>
                        <div class="radio mgb0" style="margin-top: -6px;">
                            <label>
                                <input type="radio" name="under14Fl" value="no" >
                                가입불가
                            </label>
                        </div>
                    </dd>
                </dl>
            </td>
        </tr>
    </table>

    <div class="notice-info notice-sm mgl15 mgb15">정보통신망법에 따라 만14세 미만의 아동은 법정대리인의 동의를 확인 후 회원가입 할 수 있습니다.<br>
    '운영자 승인 후 가입' 및 '가입불가'로 설정 시 본인확인인증서비스가 적용되어 있어야 하며,<br>
    본인확인인증서비스 미 사용 시에는 '생년월일'을 필수로 입력 받으셔야 합니다.<br>
    본인확인인증서비스 또는 생년월일 필수 설정이 없는 경우 만14세 미만 회원을 판단할 수 없으므로 '미승인'상태로 가입되거나(인증 후 가입 선택 시),<br>
    가입할 수 없으니(가입불가 선택 시) 주의해주시기 바랍니다.&nbsp;<a href="../policy/member_auth_cellphone.php" target="_blank" class="btn-link-underline">휴대폰본인확인관리></a>&nbsp;<a href="../policy/member_auth_ipin.php" target="_blank" class="btn-link-underline">아이핀관리></a></div>
    <div class="linepd30"></div>

    <div class="table-title gd-help-manual">
        간편 로그인 기본설정
    </div>
    <table class="table table-cols">
        <colgroup>
            <col class="width-md"/>
            <col class=""/>
            <col/>
        </colgroup>
        <tr>
            <th>본인인증 제외설정</th>
            <td>
                <dl class="dl-horizontal">
                    <dt class="form-inline" style="width: 250px;">
                        간편 로그인으로 회원가입 시 본인인증 절차
                    </dt>
                    <dd style="margin-left: 250px;">
                        <div class="radio mgt0">
                            <label>
                                <input type="radio" name="snsMemberAuthFl" value="y" checked="checked">
                                사용함
                            </label>
                        </div>
                        <div class="radio mgb0" style="margin-top: -6px;">
                            <label>
                                <input type="radio" name="snsMemberAuthFl" value="n" >
                                제외함
                            </label>
                        </div>
                    </dd>
                </dl>
            </td>
        </tr>
    </table>
    <div class="notice-info notice-sm mgl15">
        ‘가입연령제한 설정’이 ‘운영자 승인 후 가입’ 및 ‘가입불가’ 이고 가입 항목 중 ‘생일’이 필수가 아닌 경우, 본인확인인증서비스가 필수이므로 ‘제외함’설정이 불가합니다.
        <br />상단의 가입연령제한 설정 및 “<a href="/member/member_joinitem.php" class="btn-link-underline" target="_blank">회원>회원 관리>회원 가입 항목 관리</a>”의 설정을 확인해주시기 바랍니다.
    </div>
    <div class="notice-info notice-sm mgl15">
        원더 아이디 로그인의 경우, ‘사용함‘으로 설정하여도 본인인증 서비스가 실행되지 않습니다.
    </div>
    <div class="notice-info notice-sm mgl15 mgb15">
        본인확인 인증 서비스(휴대폰본인확인/아이핀 서비스)가 적용되어 있어야만 ‘사용함’ 설정 시 본인인증 서비스가 실행됩니다.  <a href="/policy/member_auth_cellphone.php" class="btn-link-underline" target="_blank">휴대폰본인확인서비스></a>&nbsp;<a href="/policy/member_auth_ipin.php" class="btn-link-underline" target="_blank">아이핀서비스></a>
    </div>
    <div class="linepd30"></div>

    <div class="table-title gd-help-manual">
        탈퇴/재가입 설정
    </div>
    <table class="table table-cols mgb30">
        <colgroup>
            <col class="width-md"/>
            <col/>
        </colgroup>
        <tr>
            <th>재가입 기간제한</th>
            <td>
                <div class="radio form-inline">
                    <label>
                        <input type="radio" name="rejoinFl" value="y" >
                        회원탈퇴/삭제 후
                        <input type="text" name="rejoin" size="4" class="input_int_m js-number" data-number="4" value="0">
                        일 동안 재가입 불가
                    </label>
                </div>
                <div class="radio">
                    <label class="radio-inline">
                        <input type="radio" name="rejoinFl" value="n" checked="checked">
                        사용안함
                    </label>
                </div>
            </td>
        </tr>
    </table>

    <div class="table-title gd-help-manual">
        가입불가 회원아이디
    </div>
    <table class="table table-cols">
        <colgroup>
            <col class="width-md"/>
            <col/>
        </colgroup>
        <tr>
            <th>가입불가 회원아이디</th>
            <td>
                <textarea name="unableid" rows="3" cols="" class="form-control">admin,administration,administrator,master,webmaster,manage,manager,godo,godomall</textarea>

                <div class="notice-info notice-sm">
                    회원가입을 제한할 아이디를 쉼표(,)로 구분하여 입력하세요.
                </div>
            </td>
        </tr>
    </table>
</form>

<script type="text/javascript">
    <!--
    $(document).ready(function () {
        $('input[name=rejoin]').focusout(function () {
            if (this.value < 1) {
                this.value = 1;
            }
        });

        // 재가입 기간제한
        $('input[name=\'rejoinFl\']').click(setRejoinFl);
        $('input[name=\'rejoinFl\']').each(function () {
            setRejoinFl.call(this);
        });

        $('#btnUnder14Download').click(function (e) {
            window.open('./member_ps.php?mode=under14Download');
            e.preventDefault();
        });

        var $frmSetup = $('#frmSetup');
        $frmSetup.validate({
            submitHandler: function (form) {
                if ($('[name=rejoinFl]:eq(0)', $frmSetup).prop('checked')) {
                    if ($('input[name="rejoin"]').val() < 1) {
                        alert('재가입 기간제한을 사용하지 않으시려면 사용하지 않음을 체크해주시기 바랍니다.');
                        return false;
                    }
                }

                var data = $(form).serializeArray();
                data.push({name: 'mode', value: 'member_join'});
                post_with_reload('./member_ps.php', data);
            }
        });
    });

    /**
     * 재가입 기간제한
     */
    function setRejoinFl() {
        if ($(this).prop('checked') === false) return;

        var thisVal = $('input[name=\'rejoinFl\']:checked').val();

        if (thisVal == 'y') {
            $('input[name=\'rejoin\']').prop('disabled', false);
        } else {
            $('input[name=\'rejoin\']').prop('disabled', true);
        }
    }
    //-->
</script>

                                    </div>
            </div>





</th:block>


</html>

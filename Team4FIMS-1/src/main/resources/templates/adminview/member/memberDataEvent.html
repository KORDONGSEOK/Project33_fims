<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{layout/admin/memberdefault}">

<th:block layout:fragment="adminMainContents">

<div id="content" class="row">
                <div class="col-xs-12">
                    <div class="page-header js-affix">
    <h3>회원정보 이벤트</h3>
    <div class="btn-group">
        <input type="button" value="회원정보 이벤트 등록" class="btn btn-red-line js-register"/>
    </div>
</div>
<div class="table-title gd-help-manual">회원정보 이벤트 검색</div>
<form id="frmSearchEventList" method="get" class="content-form js-form-enter-submit">
    <input type="hidden" name="sort" value="mme.regDt desc"/>
    <input type="hidden" name="pageNum" value="10"/>
    <div class="search-detail-box">
        <table class="table table-cols">
            <colgroup>
                <col class="width-md"/>
                <col/>
                <col class="width-md"/>
                <col/>
            </colgroup>
            <tbody>
                            <tr>
                    <th>상점</th>
                    <td colspan="3">
                        <label class="radio-inline">
                            <input type="radio" name="mallStatus" value="all" checked="checked" />전체
                        </label>
                                                    <label class="radio-inline">
                                <input type="radio" name="mallStatus" value="1" /><span class="flag flag-16 flag-kr"></span> 기준몰                            </label>
                                                        <label class="radio-inline">
                                <input type="radio" name="mallStatus" value="2" /><span class="flag flag-16 flag-us"></span> 영문몰                            </label>
                                                        <label class="radio-inline">
                                <input type="radio" name="mallStatus" value="3" /><span class="flag flag-16 flag-cn"></span> 중문몰                            </label>
                                                        <label class="radio-inline">
                                <input type="radio" name="mallStatus" value="4" /><span class="flag flag-16 flag-jp"></span> 일문몰                            </label>
                                                </td>
                </tr>
                        <tr>
                <th>검색어</th>
                <td colspan="3">
                    <div class="form-inline">
                        <select class="form-control " id="searchKeyword" name="searchKeyword" ><option value="all" selected="selected" >=통합검색=</option><option value="eventNm"  >이벤트명</option><option value="eventDescription"  >이벤트설명</option><option value="managerId"  >등록자(아이디)</option></select>                        <input type="text" name="keyword" value="" class="form-control"/>
                    </div>
                </td>
            </tr>
            <tr>
                <th>진행상태</th>
                <td><label class="radio-inline">
<input type="radio" name="eventStatusFl" value="all" checked="checked" > 전체
</label >
<label class="radio-inline">
<input type="radio" name="eventStatusFl" value="y"  > 진행중
</label >
<label class="radio-inline">
<input type="radio" name="eventStatusFl" value="n"  > 종료
</label >
<label class="radio-inline">
<input type="radio" name="eventStatusFl" value="w"  > 대기
</label >
</td>
                <th>이벤트 유형</th>
                <td><label class="radio-inline">
<input type="radio" name="eventType" value="all" checked="checked" > 전체
</label >
<label class="radio-inline">
<input type="radio" name="eventType" value="modify"  > 회원정보 수정
</label >
<label class="radio-inline">
<input type="radio" name="eventType" value="life"  > 평생회원
</label >
</td>
            </tr>
            <tr>
                <th>기간검색</th>
                <td colspan="3">
                    <div class="form-inline">
                        <select class="form-control " id="searchDateStatus" name="searchDateStatus" ><option value="regDt" selected="selected" >등록일</option><option value="eventStartDt"  >시작일</option><option value="eventEndDt"  >종료일</option></select>                        <div class="input-group js-datepicker">
                            <input type="text" class="form-control width-xs" name="searchDate[]" value="2019-12-25">
                            <span class="input-group-addon">
                                <span class="btn-icon-calendar"></span>
                            </span>
                        </div>
                        ~
                        <div class="input-group js-datepicker">
                            <input type="text" class="form-control width-xs" name="searchDate[]" value="2019-12-31">
                            <span class="input-group-addon">
                                <span class="btn-icon-calendar"></span>
                            </span>
                        </div>
                        <div class="btn-group js-dateperiod" data-toggle="buttons" data-target-name="searchDate"><label class="btn btn-white btn-sm hand "><input type="radio" name="searchPeriod" value="0"  >오늘</label><label class="btn btn-white btn-sm hand "><input type="radio" name="searchPeriod" value="6"  >7일</label><label class="btn btn-white btn-sm hand "><input type="radio" name="searchPeriod" value="14"  >15일</label><label class="btn btn-white btn-sm hand "><input type="radio" name="searchPeriod" value="29"  >1개월</label><label class="btn btn-white btn-sm hand "><input type="radio" name="searchPeriod" value="89"  >3개월</label><label class="btn btn-white btn-sm hand "><input type="radio" name="searchPeriod" value="364"  >1년</label> </div >                     </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="table-btn">
        <input type="submit" value="검색" class="btn btn-lg btn-black">
    </div>
    <div class="table-header">
        <div class="pull-left">
            검색 <strong>0</strong>개 /
            전체 <strong>0</strong>개
        </div>
        <div class="pull-right form-inline">
            <select class=" form-control js-page-sort" id="sortList" name="sortList" ><option value="mme.regDt desc" selected="selected" >등록일 ↑</option><option value="mme.regDt asc"  >등록일 ↓</option><option value="mme.eventStartDt desc"  >시작일 ↑</option><option value="mme.eventStartDt asc"  >시작일 ↓</option><option value="mme.eventEndDt desc"  >종료일 ↑</option><option value="mme.eventEndDt asc"  >종료일 ↓</option><option value="mme.eventNm desc"  >이벤트명 ↑</option><option value="mme.eventNm asc"  >이벤트명 ↓</option></select>            <select class=" js-page-number form-control" id="pageNum" name="pageNum" ><option value="10" selected="selected" >10개 보기</option><option value="20"  >20개 보기</option><option value="30"  >30개 보기</option><option value="40"  >40개 보기</option><option value="50"  >50개 보기</option><option value="60"  >60개 보기</option><option value="70"  >70개 보기</option><option value="80"  >80개 보기</option><option value="90"  >90개 보기</option><option value="100"  >100개 보기</option><option value="200"  >200개 보기</option><option value="300"  >300개 보기</option><option value="500"  >500개 보기</option></select>        </div>
    </div>
</form>

<form id="frmMemberModifyEventList" method="post" target="ifrmProcess">
    <input type="hidden" name="mode" value="">
    <table class="table table-rows">
        <thead>
        <tr>
            <th class="width5p"><input type="checkbox" class="js-checkall" data-target-name="eventListCheck[]"></th>
            <th class="width5p">번호</th>
                            <th class="width5p">상점구분</th>
                        <th>이벤트명</th>
            <th>이벤트 유형</th>
            <th class="width7p">진행상태</th>
            <th class="width20p">진행기간</th>
            <th class="width7p">등록자</th>
            <th class="width10p">등록일</th>
            <th class="width7p">참여내역관리</th>
            <th class="width7p">수정</th>
        </tr>
        </thead>
        <tbody>
                    <tr class="text-center">
                <td colspan="12" class="no-data">검색된 이벤트가 없습니다.</td>
            </tr>
                </tbody>
    </table>
    <div class="table-action">
        <div class="pull-left">
            <button type="button" class="btn btn-white js-delete-event">선택삭제</button>
        </div>
        <div class="pull-right">
            <button type="button" class="btn btn-white js-close-event">종료하기</button>
        </div>
    </div>
</form>
<div class="center"><nav><ul class="pagination pagination-sm"></ul></nav></div>

<script type="text/javascript">
    <!--
    $(document).ready(function () {
        // 회원정보 수정 이벤트 등록
        $('.js-register').click(function () {
            location.href = './member_modify_event_register.php';
        });

        // 이벤트 종료
        $('.js-close-event').click(function () {
            if ($('input[name="eventListCheck[]"]:checked').length === 0) {
                alert('종료할 이벤트를 선택해 주세요.');
                return false;
            }

            var closeEventFl = false;
            $('input[name="eventListCheck[]"]:checked').each(function () {
                var status = $(this).data('status');
                if (status === 'n') {
                    alert('종료된 이벤트입니다.');
                    closeEventFl = true;
                    return false;
                } else if (status === 'w') {
                    alert('진행중인 이벤트가 아닙니다.');
                    closeEventFl = true;
                    return false;
                }
            });

            if (closeEventFl) {
                return false;
            }

            $('#frmMemberModifyEventList input[name="mode"]').val('closeEvent');
            var params = $('#frmMemberModifyEventList').serializeArray();
            post_with_reload('../member/member_modify_event_ps.php', params);
        });

        // 이벤트 삭제
        $('.js-delete-event').click(function () {
            var chkEventList = $('input[name="eventListCheck[]"]:checked');
            if (chkEventList.length === 0) {
                alert('삭제할 이벤트를 선택해 주세요.');
                return false;
            }

            var deleteEventFl = false;
            chkEventList.each(function () {
                if ($(this).data('eventstatusfl') === 'y' && $(this).data('eventstatusfl') === '진행중') {
                    alert('진행 중인 이벤트는 삭제하실 수 없습니다. 이벤트 종료 후 삭제하여 주시기 바랍니다.');
                    deleteEventFl = true;
                    return false;
                }
            });

            if (deleteEventFl) {
                return false;
            }

            BootstrapDialog.confirm({
                title: '회원정보 수정 이벤트 삭제',
                message: '선택된 ' + chkEventList.length + '개의 이벤트를 정말로 삭제하시겠습니까?<br/> 삭제된 이벤트는 복구되지 않습니다.',
                btnCancelLabel: "취소",
                btnOKLabel: '확인',
                closable: true,
                callback: function(result){
                    if (result) {
                        $('#frmMemberModifyEventList input[name="mode"]').val('deleteEvent');
                        var params = $('#frmMemberModifyEventList').serializeArray();
                        post_with_reload('../member/member_modify_event_ps.php', params);
                    }
                }
            });
        });
    });

    //-->
</script>
                                    </div>
            </div>





</th:block>


</html>
